<section class="m-0 mb-4 p-0">
    <div class="my-4 text-end">
        <button type="button" class="btn btn-success fw-bold" (click)="cargarFormularioTicket()">Agregar Ticket</button>
    </div>

    <!-- Filtro -->
    <div class="filtroCategoria">
        <form #filtroForm="ngForm">
            <!-- Moneda Origen -->
            <div class="mb-4 px-3">
                <label for="idCategoria" class="form-label fw-bold">Categoria</label>

                <select class="form-select bg-light" name="categoria" id="idCategoria" [(ngModel)]="categoria" required
                    #categoriaEspectador="ngModel">
                    <option value="l" selected>Local</option>

                    <option value="e">Extranjero</option>
                </select>

                <!-- Validar Categoria -->
                <div *ngIf="categoriaEspectador.invalid && (categoriaEspectador.dirty || categoriaEspectador.touched)"
                    class="alert alert-danger">
                    <div *ngIf="categoriaEspectador.errors?.['required']">
                        La categoria es requerida.
                    </div>
                </div>
            </div>

            <div class="text-center m-0 pt-2 pb-4">
                <button type="submit" class="btn btn-primary fw-bold mx-2 px-3" (click)="cargarTicketsPorCategoria()"
                    [disabled]="filtroForm.invalid">Filtrar</button>

                <button *ngIf="activo" type="submit" class="btn btn-warning fw-bold mx-2 px-3" (click)="cargarTickets()"
                    [disabled]="filtroForm.invalid">Limpiar Filtro</button>
            </div>
        </form>
    </div>

    <!-- Tabla Tickets -->
    <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover table-dark text-center">
            <thead class="table-light">
                <tr>
                    <th scope="col">Precio</th>
                    <th scope="col">Categoria</th>
                    <th scope="col">Fecha de compra</th>
                    <th scope="col">Espectador</th>
                    <th scope="col">Opciones</th>
                </tr>
            </thead>

            <tbody class="table-group-divider">
                <tr *ngFor="let t of tickets">
                    <td>${{t.precioTicket}}</td>
                    <td>{{obtenerCategoriaEspectador(t.categoriaEspectador)}}</td>
                    <td>{{t.fechaCompra}}</td>
                    <td>{{t.espectador.nombre}} {{t.espectador.apellido}}</td>

                    <td>
                        <div class="mb-2">
                            <button class="btn btn-warning" (click)="modificarTicket(t)">Modificar</button>
                        </div>

                        <div class="mt-2">
                            <button class="btn btn-danger px-3" (click)="eliminarTicket(t)">Eliminar</button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</section>